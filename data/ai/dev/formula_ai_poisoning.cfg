#textdomain wesnoth
[ai]
    ai_algorithm = composite_ai
    id=default_ai_poisoning
    description= Default AI with poisoning formula
    [stage]
        engine=cpp
        name=testing_ai_default::candidate_action_evaluation_loop
        [candidate_action]
            engine=fai
            name=poisoner
            type=attack
            [filter]
                me="filter( input, 'me', filter(me.attacks,'att',filter(att.special,'spe',contains_string(spe,'poison'))))"
                target="filter( input, 'target', target.undead = 0 and target.hitpoints > 5 and index_of('poisoned',keys(target.states)) = -1)"
            [/filter]
            evaluation="{ai/formula/poisoner_eval.fai}"
            action="{ai/formula/poisoner_attack.fai}"
        [/candidate_action]
    [/stage]
    [stage]
        engine=cpp
        name=testing_ai_default::fallback
        fallback=formula_ai
    [/stage]
    eval_list=yes
[/ai]
