#textdomain wesnoth
# macros for bridges/rails and anything overlayed that is path-like

#define IMAGEC_LN LAYER NAME
    [image]
        layer={LAYER}
	center=90,144
        name={BUILD_IMAGE IMAGE_SINGLE {NAME} ()}
    [/image]
#enddef

#This adds an end to a bridge (the bridge is on 2, and we draw on 1)
#define TRACK_END_PLF TERRAIN ADJACENT PROB LAYER FLAG IMAGESTEM R0 R1 R2 R3 R4 R5 S0 S1 S2 S3 S4 S5 
    [terrain_graphics]
        map="
,  {S0}
{S5},   {S1}
,  1
{S4},   {S2}
,  {S3}"
        [tile]
	    pos=2
            type={TERRAIN}
            no_flag={FLAG}-away-{R3},{FLAG}-{R2},{FLAG}-{R4}
        [/tile]
        [tile]
	    pos=1
            type={ADJACENT}
            no_flag={FLAG}-{R0}
        [/tile]
        probability={PROB}
        {IMAGEC_LN {LAYER}  {IMAGESTEM}-{R0}}
    [/terrain_graphics]
#enddef

# this macro produces Y intersections
#define TRACK_Y_PLF TERRAIN ADJACENT1 ADJACENT2 PROB LAYER FLAG IMAGESTEM R0 R1 R2 R3 R4 R5 S0 S1 S2 S3 S4 S5
    [terrain_graphics]
        map="
,  {S1}
{S0},   {S2}
,  1
{S5},   {S3}
,  {S4}"
        [tile]
            pos=1
            type={TERRAIN}
            no_flag={FLAG},{FLAG}-{R0},{FLAG}-{R2},{FLAG}-{R4}
            set_flag={FLAG},{FLAG}-{R1},{FLAG}-{R5},{FLAG}-{R3}
        [/tile]
        [tile]
            pos=2
            no_flag={FLAG}-{R3},{FLAG}-{R1}
            set_flag={FLAG}-{R2}
            type={ADJACENT1}
        [/tile]
        [tile]
            pos=3
            no_flag={FLAG}-{R3},{FLAG}-{R5}
            set_flag={FLAG}-{R4}
            type={ADJACENT2}
        [/tile]
        [tile]
            pos=4
            type=!,{TERRAIN}
            set_flag={FLAG}-away-{R3}
        [/tile]
        probability={PROB}
        {IMAGEC_LN {LAYER}  {IMAGESTEM}}
    [/terrain_graphics]
#enddef

# this macro keeps colinear bridges connected, it does not add images
#define TRACK_CONNECT_F TERRAIN FLAG R0 R1 R2 R3 R4 R5 X Y
    [terrain_graphics]
        [tile]
            x=1
            y=1
            type={TERRAIN}
            no_flag={FLAG}-{R1},{FLAG}-{R5}
            set_flag={FLAG}-{R0}
        [/tile]
        [tile]
            x={X}
            y={Y}
            type={TERRAIN}
            no_flag={FLAG}-{R2},{FLAG}-{R4}
            set_flag={FLAG}-{R3}
        [/tile]
    [/terrain_graphics]
#enddef

# this macro handles the normal corners
#define TRACK_CORNER_PLF TERRAIN ADJACENT PROB LAYER FLAG IMAGESTEM A1 A2 A3 A4 A5 A6 S0 S1 S2 S3 S4 S5
    [terrain_graphics]
        map="
,  {S1}
{S0},   {S2}
,  1
{S5},   {S3}
,  {S4}"
        [tile]
            pos=1
            type={TERRAIN}
            no_flag={FLAG},{FLAG}-{A3},{FLAG}-{A4},{FLAG}-{A5},{FLAG}-{A6}
            set_flag={FLAG},{FLAG}-{A1},{FLAG}-{A2}
        [/tile]
        [tile]
            pos=2
            type={ADJACENT}
            no_flag={FLAG}-{A1},{FLAG}-{A6}
            set_flag={FLAG}-{A3}
        [/tile]
        [tile]
            pos=3
            set_flag={FLAG}-away-{A1}
        [/tile]
        probability={PROB}
        {IMAGEC_LN {LAYER}  {IMAGESTEM}}
    [/terrain_graphics]
#enddef

#define TRACK_PLF TERRAIN PROB LAYER FLAG IMAGESTEM 
    [terrain_graphics]
        map="
, *
* , *
, 1
* , *
, *"

        [tile]
            pos=1
            type={TERRAIN}
            no_flag={FLAG}
            set_flag={FLAG}
        [/tile]

        probability={PROB}
        {IMAGEC_LN {LAYER}  {IMAGESTEM}}
    [/terrain_graphics]
#enddef
