#textdomain wesnoth
# This file handles transitions involving bridges

# macros to make things shorter
# the main macro, called from terrain-graphics.cfg
#define TRACK_LF SE_NW_VALUE N_S_VALUE NE_SW_VALUE LAYER FLAG IMAGESTEM

    # make sure that colinear adjacent bridges stay connected
    {TRACK_CONNECT_F {N_S_VALUE}   {FLAG} n ne se s sw nw * 2 * * * *}
    {TRACK_CONNECT_F {NE_SW_VALUE} {FLAG} ne se s sw nw n * * 2 * * *}
    {TRACK_CONNECT_F {SE_NW_VALUE} {FLAG} se s sw nw n ne * * * 2 * *}
    {TRACK_CONNECT_F {N_S_VALUE}   {FLAG} s sw nw n ne se * * * * 2 *}
    {TRACK_CONNECT_F {NE_SW_VALUE} {FLAG} sw nw n ne se s * * * * * 2}
    {TRACK_CONNECT_F {SE_NW_VALUE} {FLAG} nw n ne se s sw 2 * * * * *}

    # find Y intersections
    {TRACK_Y_RANDOM_LF {N_S_VALUE} {SE_NW_VALUE} {NE_SW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -ne-s-nw n ne se s sw nw 2 4 3 * * *}
    {TRACK_Y_RANDOM_LF {NE_SW_VALUE} {N_S_VALUE} {SE_NW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -n-se-sw ne se s sw nw n * 2 4 3 * *}
    {TRACK_Y_RANDOM_LF {SE_NW_VALUE} {NE_SW_VALUE} {N_S_VALUE} {LAYER} {FLAG} {IMAGESTEM} -ne-s-nw se s sw nw n ne * * 2 4 3 *}
    {TRACK_Y_RANDOM_LF {N_S_VALUE} {SE_NW_VALUE} {NE_SW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -n-se-sw s sw nw n ne se * * * 2 4 3}
    {TRACK_Y_RANDOM_LF {NE_SW_VALUE} {N_S_VALUE} {SE_NW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -ne-s-nw sw nw n ne se s 3 * * * 2 4}
    {TRACK_Y_RANDOM_LF {SE_NW_VALUE} {NE_SW_VALUE} {N_S_VALUE} {LAYER} {FLAG} {IMAGESTEM} -n-se-sw nw n ne se s sw 4 3 * * * 2}

    # normal corners
    {TRACK_CORNER_RANDOM_LF {N_S_VALUE}   {SE_NW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -s-nw  s  nw se n  sw ne 2 3 * * * *}
    {TRACK_CORNER_RANDOM_LF {N_S_VALUE}   {NE_SW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -ne-s  s  ne sw n  se nw * 3 2 * * *}
    {TRACK_CORNER_RANDOM_LF {NE_SW_VALUE} {N_S_VALUE}   {LAYER} {FLAG} {IMAGESTEM} -n-sw  sw n  s  ne nw se * 2 3 * * *}
    {TRACK_CORNER_RANDOM_LF {NE_SW_VALUE} {SE_NW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -se-sw sw se nw ne s  n  * * 3 2 * *}
    {TRACK_CORNER_RANDOM_LF {SE_NW_VALUE} {NE_SW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -ne-nw nw ne sw se n  s  * * 2 3 * *}
    {TRACK_CORNER_RANDOM_LF {SE_NW_VALUE} {N_S_VALUE}   {LAYER} {FLAG} {IMAGESTEM} -s-nw  nw s  n  se sw ne * * * 3 2 *}
    {TRACK_CORNER_RANDOM_LF {N_S_VALUE}   {SE_NW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -n-se  n  se nw s  ne sw * * * 2 3 *}
    {TRACK_CORNER_RANDOM_LF {N_S_VALUE}   {NE_SW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -n-sw  n  sw ne s  nw se * * * * 3 2}
    {TRACK_CORNER_RANDOM_LF {NE_SW_VALUE} {N_S_VALUE}   {LAYER} {FLAG} {IMAGESTEM} -ne-s  ne s  n  sw se nw * * * * 2 3}
    {TRACK_CORNER_RANDOM_LF {NE_SW_VALUE} {SE_NW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -ne-nw ne nw se sw n  s  2 * * * * 3}
    {TRACK_CORNER_RANDOM_LF {SE_NW_VALUE} {NE_SW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -se-sw se sw ne nw s  n  3 * * * * 2}
    {TRACK_CORNER_RANDOM_LF {SE_NW_VALUE} {N_S_VALUE}   {LAYER} {FLAG} {IMAGESTEM} -n-se  se n  s  nw ne sw 3 2 * * * *}

    # Mark lonely tiles
    {TRACK_ALONE_RANDOM_LF {N_S_VALUE}   -80 {FLAG} {IMAGESTEM} -ns n ne se s sw nw * 2 * * * *}
    {TRACK_ALONE_RANDOM_LF {NE_SW_VALUE} -80 {FLAG} {IMAGESTEM} -nesw ne se s sw nw n * * 2 * * *}
    {TRACK_ALONE_RANDOM_LF {SE_NW_VALUE} -80 {FLAG} {IMAGESTEM} -senw se s sw nw n ne * * * 2 * *}
    {TRACK_ALONE_RANDOM_LF {N_S_VALUE}   -80 {FLAG} {IMAGESTEM} -ns s sw nw n ne se * * * * 2 *}
    {TRACK_ALONE_RANDOM_LF {NE_SW_VALUE} -80 {FLAG} {IMAGESTEM} -nesw sw nw n ne se s * * * * * 2}
    {TRACK_ALONE_RANDOM_LF {SE_NW_VALUE} -80 {FLAG} {IMAGESTEM} -senw nw n ne se s sw 2 * * * * *}

    # At this point, we mark "dead end bridges"
    {TRACK_DEADEND_RANDOM_LF {N_S_VALUE}   -80 {FLAG} {IMAGESTEM} n ne se s sw nw * 2 * * * *}
    {TRACK_DEADEND_RANDOM_LF {NE_SW_VALUE} -80 {FLAG} {IMAGESTEM} ne se s sw nw n * * 2 * * *}
    {TRACK_DEADEND_RANDOM_LF {SE_NW_VALUE} -80 {FLAG} {IMAGESTEM} se s sw nw n ne * * * 2 * *}
    {TRACK_DEADEND_RANDOM_LF {N_S_VALUE}   -80 {FLAG} {IMAGESTEM} s sw nw n ne se * * * * 2 *}
    {TRACK_DEADEND_RANDOM_LF {NE_SW_VALUE} -80 {FLAG} {IMAGESTEM} sw nw n ne se s * * * * * 2}
    {TRACK_DEADEND_RANDOM_LF {SE_NW_VALUE} -80 {FLAG} {IMAGESTEM} nw n ne se s sw 2 * * * * *}

    # these 3 macros define the default straight bridges wherever there is some space left
    {TRACK_STRAIGHT_RANDOM_LF {N_S_VALUE}   {LAYER} {FLAG} {IMAGESTEM} -n-s   n ne se s sw nw * 2 * * * *}
    {TRACK_STRAIGHT_RANDOM_LF {NE_SW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -ne-sw ne se s sw nw n * * 2 * * *}
    {TRACK_STRAIGHT_RANDOM_LF {SE_NW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -se-nw se s sw nw n ne * * * 2 * *}
    {TRACK_STRAIGHT_RANDOM_LF {N_S_VALUE}   {LAYER} {FLAG} {IMAGESTEM} -n-s   s sw nw n ne se * * * * 2 *}
    {TRACK_STRAIGHT_RANDOM_LF {NE_SW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -ne-sw sw nw n ne se s * * * * * 2}
    {TRACK_STRAIGHT_RANDOM_LF {SE_NW_VALUE} {LAYER} {FLAG} {IMAGESTEM} -se-nw nw n ne se s sw 2 * * * * *}

#enddef
#


#meta-macro TRACK SE_NW_TERRAIN N_S_TERRAIN NE_SW_TERRAIN L=LAYER=-80 F=FLAG=overlay IMAGESTEM
#meta-macro TRACK_BORDER_RESTRICTED TERRAINLIST ADJACENT P=PROB=100 L=LAYER=-80 F=FLAG=overlay IMAGESTEM
#meta-macro TRACK_BORDER_RESTRICTED_RANDOM TERRAINLIST ADJACENT L=LAYER=-80 F=FLAG=overlay IMAGESTEM

#####################################################################################################
###############        AUTO GENERATED CODE        ###################################################
#####################################################################################################
#The following code is autogenerated by expand-terrain-macros.py
#generated from: #meta-macro TRACK SE_NW_TERRAIN N_S_TERRAIN NE_SW_TERRAIN L=LAYER=-80 F=FLAG=overlay IMAGESTEM
#Please do not modify
#define TRACK_F SE_NW_TERRAIN N_S_TERRAIN NE_SW_TERRAIN FLAG IMAGESTEM
    {TRACK_LF ({SE_NW_TERRAIN}) ({N_S_TERRAIN}) ({NE_SW_TERRAIN}) -80 ({FLAG}) ({IMAGESTEM})}
#enddef
#define TRACK_L SE_NW_TERRAIN N_S_TERRAIN NE_SW_TERRAIN LAYER IMAGESTEM
    {TRACK_LF ({SE_NW_TERRAIN}) ({N_S_TERRAIN}) ({NE_SW_TERRAIN}) ({LAYER}) overlay ({IMAGESTEM})}
#enddef
#define TRACK SE_NW_TERRAIN N_S_TERRAIN NE_SW_TERRAIN IMAGESTEM
    {TRACK_LF ({SE_NW_TERRAIN}) ({N_S_TERRAIN}) ({NE_SW_TERRAIN}) -80 overlay ({IMAGESTEM})}
#enddef
#end of generated code
#The following code is autogenerated by expand-terrain-macros.py
#generated from: #meta-macro TRACK_BORDER_RESTRICTED TERRAINLIST ADJACENT P=PROB=100 L=LAYER=-80 F=FLAG=overlay IMAGESTEM
#Please do not modify
#define TRACK_BORDER_RESTRICTED_LF TERRAINLIST ADJACENT LAYER FLAG IMAGESTEM
    {TRACK_BORDER_RESTRICTED_PLF ({TERRAINLIST}) ({ADJACENT}) 100 ({LAYER}) ({FLAG}) ({IMAGESTEM})}
#enddef
#define TRACK_BORDER_RESTRICTED_PF TERRAINLIST ADJACENT PROB FLAG IMAGESTEM
    {TRACK_BORDER_RESTRICTED_PLF ({TERRAINLIST}) ({ADJACENT}) ({PROB}) -80 ({FLAG}) ({IMAGESTEM})}
#enddef
#define TRACK_BORDER_RESTRICTED_F TERRAINLIST ADJACENT FLAG IMAGESTEM
    {TRACK_BORDER_RESTRICTED_PLF ({TERRAINLIST}) ({ADJACENT}) 100 -80 ({FLAG}) ({IMAGESTEM})}
#enddef
#define TRACK_BORDER_RESTRICTED_PL TERRAINLIST ADJACENT PROB LAYER IMAGESTEM
    {TRACK_BORDER_RESTRICTED_PLF ({TERRAINLIST}) ({ADJACENT}) ({PROB}) ({LAYER}) overlay ({IMAGESTEM})}
#enddef
#define TRACK_BORDER_RESTRICTED_L TERRAINLIST ADJACENT LAYER IMAGESTEM
    {TRACK_BORDER_RESTRICTED_PLF ({TERRAINLIST}) ({ADJACENT}) 100 ({LAYER}) overlay ({IMAGESTEM})}
#enddef
#define TRACK_BORDER_RESTRICTED_P TERRAINLIST ADJACENT PROB IMAGESTEM
    {TRACK_BORDER_RESTRICTED_PLF ({TERRAINLIST}) ({ADJACENT}) ({PROB}) -80 overlay ({IMAGESTEM})}
#enddef
#define TRACK_BORDER_RESTRICTED TERRAINLIST ADJACENT IMAGESTEM
    {TRACK_BORDER_RESTRICTED_PLF ({TERRAINLIST}) ({ADJACENT}) 100 -80 overlay ({IMAGESTEM})}
#enddef
#end of generated code
#The following code is autogenerated by expand-terrain-macros.py
#generated from: #meta-macro TRACK_BORDER_RESTRICTED_RANDOM TERRAINLIST ADJACENT L=LAYER=-80 F=FLAG=overlay IMAGESTEM
#Please do not modify
#define TRACK_BORDER_RESTRICTED_RANDOM_F TERRAINLIST ADJACENT FLAG IMAGESTEM
    {TRACK_BORDER_RESTRICTED_RANDOM_LF ({TERRAINLIST}) ({ADJACENT}) -80 ({FLAG}) ({IMAGESTEM})}
#enddef
#define TRACK_BORDER_RESTRICTED_RANDOM_L TERRAINLIST ADJACENT LAYER IMAGESTEM
    {TRACK_BORDER_RESTRICTED_RANDOM_LF ({TERRAINLIST}) ({ADJACENT}) ({LAYER}) overlay ({IMAGESTEM})}
#enddef
#define TRACK_BORDER_RESTRICTED_RANDOM TERRAINLIST ADJACENT IMAGESTEM
    {TRACK_BORDER_RESTRICTED_RANDOM_LF ({TERRAINLIST}) ({ADJACENT}) -80 overlay ({IMAGESTEM})}
#enddef
#end of generated code
