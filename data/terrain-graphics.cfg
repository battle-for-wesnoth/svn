#
# Macro definitions for various terrain types that may be found. Those will be
# used, below in this file, to define actual terrain types. 
#

# The following flags are defined to have a meaning
#
# * terrain-$name : the corresponding tile has already graphics for the terrain
# named $name. No other one should be added.
# * transition-$direction : the corresponding tile already has the transition
# in the given direction (or should not have one). No other one should be
# added.

# The following precendeces are defined to have a meaning:
# 0: normal terrain, normal transitions
# 16: castles
# 32: decorations over castles

{terrain-graphics}

#
# Attachs graphics to each known terrain types
#

{CASTLE_TRANSITION CK f dirt forest-ctrans}

{TERRAIN_BASE K keep}
{TERRAIN_BASE C castle}
{TERRAIN_BASE n dirt}


{TERRAIN_BASE D flag-cave-neutral}
{TERRAIN_BASE u cave}
{TERRAIN_BASE W cavewall}
{TERRAIN_BASE F snow-forest}
{TERRAIN_BASE f forest}
{TERRAIN_BASE m mountains}
{TERRAIN_BASE H snow-hills}
{TERRAIN_BASE_PROBABILITY h hills-variation1 15}
{TERRAIN_BASE_PROBABILITY h hills-variation2 15}
{TERRAIN_BASE_PROBABILITY h hills-variation3 30}
{TERRAIN_BASE h hills}
{TERRAIN_BASE_PROBABILITY S snow2 30}
{TERRAIN_BASE_PROBABILITY S snow3 30}
{TERRAIN_BASE S snow}
{TERRAIN_BASE V flag-snow-neutral}
{TERRAIN_BASE v human-village}
{TERRAIN_BASE t flag-neutral}
{TERRAIN_BASE_PROBABILITY g grassland-rocks 4}
{TERRAIN_BASE_PROBABILITY g grassland-flowers 8}
{TERRAIN_BASE g grassland}
{TERRAIN_BASE r dirt}
{TERRAIN_BASE R road}
{TERRAIN_BASE_PROBABILITY d desert-plant 10}
{TERRAIN_BASE d desert}
{TERRAIN_BASE \ bridge-se-nw}
{TERRAIN_BASE / bridge-ne-sw}
{TERRAIN_BASE | bridge-n-s}
{TERRAIN_BASE Y flag-swampwater-neutral}
{TERRAIN_BASE_PROBABILITY w swampwater2 30}
{TERRAIN_BASE_PROBABILITY w swampwater3 30}
{TERRAIN_BASE w swampwater}
{TERRAIN_BASE i ice}
{TERRAIN_BASE p pier}
{TERRAIN_BASE c coast}
{TERRAIN_BASE s ocean}
{TERRAIN_BASE Z flag-coast-neutral}
{TERRAIN_BASE ~ fog}
{TERRAIN_BASE ( ) void}

#
# Transition between terrains
#

# Special transitions go first

# Castle and keeps. Always use the same letter for keeps: the CASTLE_AND_KEEP
# macro will determine the correct graphics to use, according to the adjacent
# castle letter.

#define KEEP_TILE
K
#enddef
{CASTLE_AND_KEEP C {KEEP_TILE} castle keep}
{CASTLE_AND_KEEP e {KEEP_TILE} encampment tent}

# Forest, hills and mountains should always overlay on northern sides
{TERRAIN_ADJACENT_NORTH m mountains}
{TERRAIN_ADJACENT_NORTH H snow-hills}
{TERRAIN_ADJACENT_NORTH h hills}
{TERRAIN_ADJACENT_NORTH F snow-forest}
{TERRAIN_ADJACENT_NORTH f forest}

# Then, standard transitions
{TERRAIN_ADJACENT_1234 uD cave}
{TERRAIN_ADJACENT_1 F snow-forest}
{TERRAIN_ADJACENT_1 f forest}
{TERRAIN_ADJACENT_1 m mountains}
{TERRAIN_ADJACENT_12 H snow-hills}
{TERRAIN_ADJACENT_12 h hills}
{TERRAIN_ADJACENT_1234 SV snow}
{TERRAIN_ADJACENT_1234 tvg grassland}
{TERRAIN_ADJACENT_1 r dirt}
{TERRAIN_ADJACENT_1 R road}	# Graphics do not seem to be here
{TERRAIN_ADJACENT_1 d desert}
{TERRAIN_ADJACENT_1 Yw swampwater}
{TERRAIN_ADJACENT_1 i ice}
{TERRAIN_ADJACENT_1 cZp\|/ coast}
{TERRAIN_ADJACENT_1 s ocean}
{TERRAIN_ADJACENT_1234 ~ fog}
{TERRAIN_ADJACENT_1234 ( ) void}

# Some test cases

#[terrain_graphics]
#	map="
#.   1
#  .
#.   1
#  .
#.   1
#  1
#1"
#	[tile]
#		pos=1
#		type=m
#	[/tile]
#
#	probability=30
#	no_flag="built-m"
#	set_flag="built-m"
#	
#	[image]
#		z_index=-99
#		name="mountains-test"
#	[/image]
#[/terrain_graphics]

#[terrain_graphics]
#	[tile]
#		x=0
#		y=0
#		type=m
#		[image]
#			z_index=-99
#			name="mountains-test-2"
#		[/image]
#	[/tile]
#	# probability=20
#	no_flag="built-m"
#	set_flag="built-m"
#
#	precedence=2
#[/terrain_graphics]

