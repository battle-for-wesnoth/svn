[scenario]
	id=The_Drowned_Plains
	textdomain=wesnoth-ei
	name= _ "The Drowned Plains"
	map_data="{maps/Eastern_Invasion/Drowned_Plains}"
	turns=24
	next_scenario=Approaching_Weldyn
	
	{DAWN}
	{MORNING}
	{AFTERNOON}
	{DUSK}
	{FIRST_WATCH}
	{SECOND_WATCH}

	music="wesnoth-2.ogg"

	objectives= _ "
Victory:
@Defeat Khrakrahs the Skeletal Dragon
Defeat:
#Death of Gweddry
#Death of Dacyn
#Death of Owaec
#Turns run out"

	{scenarios/Eastern_Invasion/deaths.cfg}

	[story]
		[part]
			background=campaigns/Eastern_Invasion/maps/eastern_invasion.png
			show_title=yes
		[/part]
	[/story]

	[side]
	type=Lieutenant
	description=Gweddry
	side=1
	canrecruit=1
	controller=human
	[/side]
	
	[side]
	type=Skeletal Dragon
	description=Mal-Rhazal
	side=2
	canrecruit=1
	controller=ai
	recruit=Vampire Bat
	gold=0
	[/side]
	
	[event]
	name=start
		[recall]
		description=Dacyn
		[/recall]
		[recall]
		description=Owaec
		[/recall]
		[message]
		description=Owaec
		message= _ "What the... swamps? These were fertile plains when I was here last!"
		[/message]
		[message]
		description=Dacyn
		message= _ "The lich-lord Mal-Ravanal must have flooded the valley. The undead like the swamp. It is death, decay, everything that they are themselves."
		[/message]
		[message]
		description=Owaec
		message= _ "I suppose we will have to wade across it... ugh."
		[/message]
		[message]
		description=Mal-Rhazal
		message= _ "Die... die... my master is calling you... Die!" 
		[/message]
		[unit]
		x=27
		y=10
		description=Khrakrahs
		side=2
		canrecruit=1
		type=Skeletal Dragon
		[/unit]
		[message]
		description=Gweddry
		message= _ "What is that?!?"
		[/message]
		[message]
		description=Dacyn
		message= _ "Ah, the dragon Khrakrahs. When it was alive, it was the most powerful creature ever, living in the Eastern Mountains. It must have fled when the Undead came."
		[/message]
		[message]
		description=Mal-Rhazal
		message= _ "Yes, the dragon fled, but not even the mightiest can escape the all-powerful clutches of the great lich Mal-Ravanal. You remember the prophecy, Dacyn. You will meet your doom!"
		[/message]
		[kill]
		description=Mal-Rhazal
		[/kill]
		[message]
		description=Gweddry
		message= _ "Prophecy?"
		[/message]
	[/event]


#define UNDEAD X Y
[set_variable]
name=type
random=Bone Shooter,Revenant,Shadow,Wraith,Necrophage,Bone Shooter,Revenant,Shadow,Wraith,Necrophage,Soul Shooter,Spectre,Nightgaunt
[/set_variable]
[unit]
x={X}
y={Y}
type=$type
side=2
[/unit]
#enddef


	[event]
	name=moveto
		[filter]
		side=1
		x=1-50
		y=9-18
		[/filter]
		[if]
			[have_unit]
			x=$x1
			y=$y1
			description=Gweddry
			[/have_unit]
			[then]
				[message]
				description=Gweddry
				message= _ "Undead are rising out of the ground! We must destroy them, quickly!"
				[/message]
			[/then]
			[else]
				[message]
				speaker=unit
				message= _ "My lord, undead are rising out of the cracks in the ground!"
				[/message]
				[message]
				description=Gweddry
				message= _ "This might be more difficult than I thought."
				[/message]
			[/else]
		[/if]

		{UNDEAD 11 14}
		{UNDEAD 13 13}
		{UNDEAD 15 12}
		{UNDEAD 17 11}
		{UNDEAD 19 10}
		{UNDEAD 14 10}
		{UNDEAD 16 9}
		{UNDEAD 18 8}
		{UNDEAD 20 7}
		{UNDEAD 29 4}
		{UNDEAD 31 5}
		{UNDEAD 33 6}
		{UNDEAD 27 6}
#ifdef EASY
#else
		{UNDEAD 13 15}
		{UNDEAD 15 14}
		{UNDEAD 17 13}
		{UNDEAD 19 12}
		{UNDEAD 20 11}
		{UNDEAD 35 7}
#endif
#ifdef HARD
		{UNDEAD 24 10}
		{UNDEAD 24 11}
		{UNDEAD 32 9}
		{UNDEAD 32 10}
		{UNDEAD 27 12}
		{UNDEAD 28 12}
#endif
	[/event]
	[event]
	name=die
		[filter]
		description=Khrakrahs
		[/filter]
		[message]
		description=Dacyn
		message= _ "Now let's get out of this bog!"
		[/message]
		[endlevel]
		result=victory
		bonus=yes
		[/endlevel]
	[/event]
[/scenario]
