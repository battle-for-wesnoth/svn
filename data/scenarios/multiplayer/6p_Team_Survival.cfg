#define TS_MAP_DATA
                                               
                 W           W                 
               WWwWW       WWcWW               
             WWwwGwcWW   WWccIccWW             
           WWwwYTmGGccWWWccTIPIGcwWW           
         WWcwcwGhrGhTTcWcfGGJMJTccwwWW         
       WWccGcdc/rTrrLGcWctggTrrrdcwYwwWW       
       WcIIJTrrdccGrGkcWcghgrgggr\GhTGwW       
       WcIPMrggccchrcfcWccfcrcZcdcrrmGwW       
       WcTJTrgZsscT|cgcWcfkg|cssccTrGGcW       
       WcGGgrrcccfcRckcWcggRRhccchGrhTcW       
       Wcfghgc\RhbhRfgcWcghRfbfcTrrGLTcW       
       WcctgfkgRfRRgggcWcgggRRhR/cckGccW       
     WWcWWcccfghRgRChgcWcgfCRgRfcgfccWWcWW     
   WWccTccWWccgggfC2CgcWcgC3ChggkccWWccfccWW   
 WWwcGTLGkccWWccggCccccWccccCggccWWccgtgGTccWW 
 WwGGGhrGcfgccWWccgcsWWlWWscgccWWccfcfhgGJIIcW 
 WwTmrrGrrcckgccWWcWWWlWlWWWcWWccgggkcgrTMPIcW 
 WwYhrTchT\RfgggccWllllWllllWccggghRg/rgrrJGcW 
 WwwG|ccccchRghCgcWlWWW'WWWlWcgCfgRfRccZgrTccW 
 WwccrdcscfbRRC7csWWlW'1'WlWWsc4CRRbhcscgrdcwW 
 WwcdrgZschfRgCCccWllW'''WllWccCCgRhfcscd|cwwW 
 WcGTrggc/RRRgfggcWlWlWWWlWlWcgghgRRcTcccrGYwW 
 WcIJMrrrcgghggccWWWlWlWlWlWWWccggfc\rhGTrhTwW 
 WcIPJTggfkfgccWWcccWWlllWWcccWWcckgccrrrGmGwW 
 WccITGghgcccWWccggcscWWWcscggccWWccfkGLhGGwwW 
  WWccGftccWWccgghC6cgcWcgc5CfggccWWccGTTccWW  
    WWcccWWccgkfggCCCgcWcgCCCgghgfccWWcccWW    
      WWWcckfccRRRRgfgcWcghgRRRRgkcgccWWW      
       WcTGGcr/chbRRggcWcggRRbfRgcfhtfcW       
       WcTLrrhTcfhfRhgcWckfRhfhc\rgggGcW       
       WcGhrGccsccRggfcWcgc|cccscgrTGTcW       
       WcGGrTcccsc|ckccWcfcrTcscZgrMJIcW       
       WwGmhr\dgZgrgfgcWckcrhccdgrrJPIcW       
       WwwTYGcrrgrrghtcWcGGrGTc/rdTGIccW       
        WWwwwcdTrMTGgfcWcTLhrrrGcccccWW        
          WWwwcGJPJTGccWccTGGmhYwwwWW          
            WWccIIIccWW WWccGGTwwWW            
              WWcccWW     WWwwwWW              
                WWW         WWW                
                                               
#enddef

#define TS_WALL_MASK_NORTH
ccc
Gcg
ccg
ggc
mhg
fgg
ccg
gkf
gkg
fcg
cWc
#enddef

#define TS_WALL_MASK_NORTH_EAST
         Gc 
       gcccc
     fmgcgg 
   gcghgc   
 fgkcgg     
cckgf       
Wcg         
#enddef

#define TS_WALL_MASK_NORTH_WEST
  cg         
 cccgc       
  Gccggg     
    gmhggf   
      fcckgg 
        ggkcc
          fcW
#enddef

#define TS_WALL_MASK_SOUTH
 W 
ccc
gkf
gkg
fcg
ggc
ghf
ggm
ccg
gcc
gcG
c c
#enddef

#define TS_WALL_MASK_SOUTH_EAST
 c          
Wcfg        
cgkkgc      
  gfcgfm    
    gghggc  
      gcccGc
        ggc 
          c 
#enddef

#define TS_WALL_MASK_SOUTH_WEST
           c 
         ggcW
       gfkkfc
     gggcgg  
   gcghfc    
 cgccgm      
  cGc        
  c          
#enddef

#define TS_CASTLE_MASK
     g   g     
   CCf   fCC   
  gfg  c  gfg  
     gfhmg     
   cmfgCfgfc   
gf fhCCCCChm fg
Cg ggCCKCCfg gC
Cf mfCCCCCgf fC
g  chgCCCfhc  g
    fgfhggm    
   f  mcf  f   
  gCgf   fgCg  
    Cg   gC    
#enddef

#define TS_OPEN_MASK_NORTH_WEST
     
   gc
 ch  
#enddef

#define TS_OPEN_MASK_NORTH_EAST
ch  
  gc
#enddef

#define TS_OPEN_MASK_EAST
c
h
g
c
#enddef

#define TS_OPEN_MASK_SOUTH_WEST
     
 c   
  gh 
    c
#enddef

#define TS_OPEN_MASK_SOUTH_EAST
    
   c
 gh 
c   
#enddef

#define TS_OPEN_MASK_WEST
c
g
h
c
#enddef

#define TS_SET_LABELS
	{SET_LABEL_PERSISTANT 24 18 (_ "Turn 2: Loyalists")}
	{SET_LABEL_PERSISTANT 27 20 (_ "Turn 5: Knalgans")}
	{SET_LABEL_PERSISTANT 27 23 (_ "Turn 8: Rebels")}
	{SET_LABEL_PERSISTANT 24 24 (_ "Turn 11: Northerners")}
	{SET_LABEL_PERSISTANT 21 23 (_ "Turn 14: Drakes")}
	{SET_LABEL_PERSISTANT 21 20 (_ "Turn 17: Undead")}
	{SET_LABEL_PERSISTANT 24 21 (_ "Tower of Doom")}
#enddef

#define TS_OPEN_WALLS
	{EARTHQUAKE (
		{IF_ALLIED 7 2 ({MODIFY_TERRAIN_MASK 7 13 ("{TS_WALL_MASK_NORTH_WEST}") ()} )}
		{IF_ALLIED 2 3 ({MODIFY_TERRAIN_MASK 23 6 ("{TS_WALL_MASK_NORTH}") ()} )}
		{IF_ALLIED 3 4 ({MODIFY_TERRAIN_MASK 29 13 ("{TS_WALL_MASK_NORTH_EAST}") ()} )}
		{IF_ALLIED 4 5 ({MODIFY_TERRAIN_MASK 29 23 ("{TS_WALL_MASK_SOUTH_EAST}") ()} )}
		{IF_ALLIED 5 6 ({MODIFY_TERRAIN_MASK 23 26 ("{TS_WALL_MASK_SOUTH}") ()} )}
		{IF_ALLIED 6 7 ({MODIFY_TERRAIN_MASK 7 23 ("{TS_WALL_MASK_SOUTH_WEST}") ()} )}
	)}
#enddef

#define TS_BUILD_CASTLE
	{EARTHQUAKE ({MODIFY_TERRAIN_MASK 17 15 ("{TS_CASTLE_MASK}") ()})}
#enddef

#define TS_OPEN_CASTLE
	{EARTHQUAKE (
		{IF_ALIVE 2 ({MODIFY_TERRAIN_MASK 19 16 ("{TS_OPEN_MASK_NORTH_WEST}") ()} )}
		{IF_ALIVE 3 ({MODIFY_TERRAIN_MASK 25 17 ("{TS_OPEN_MASK_NORTH_EAST}") ()} )}
		{IF_ALIVE 4 ({MODIFY_TERRAIN_MASK 29 20 ("{TS_OPEN_MASK_EAST}") ()} )}
		{IF_ALIVE 5 ({MODIFY_TERRAIN_MASK 25 23 ("{TS_OPEN_MASK_SOUTH_EAST}") ()} )}
		{IF_ALIVE 6 ({MODIFY_TERRAIN_MASK 19 23 ("{TS_OPEN_MASK_SOUTH_WEST}") ()} )}
		{IF_ALIVE 7 ({MODIFY_TERRAIN_MASK 19 20 ("{TS_OPEN_MASK_WEST}") ()} )}
	)}
#enddef

#define TS_SPAWN1 UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 12 10 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 29 7 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 41 18 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 36 32 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 19 36 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 7 25 () ()})}
#enddef

#define TS_SPAWN2 UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 19 7 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 36 10 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 41 25 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 29 36 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 12 32 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 7 18 () ()})}
#enddef

#define TS_SWAMP_SPAWN UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 15 6 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 35 7 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 44 22 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 33 37 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 13 36 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 4 20 () ()})}
#enddef

#define TS_LAKE_SPAWN UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 17 10 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 32 10 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 39 22 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 31 33 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 16 32 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 9 21 () ()})}
#enddef

#define TS_HOME_SPAWN UNIT
	{IF_ALIVE 2 ({CREATE_UNIT 1 ({UNIT}) 18 12 () ()})}
	{IF_ALIVE 3 ({CREATE_UNIT 1 ({UNIT}) 30 12 () ()})}
	{IF_ALIVE 4 ({CREATE_UNIT 1 ({UNIT}) 36 21 () ()})}
	{IF_ALIVE 5 ({CREATE_UNIT 1 ({UNIT}) 30 30 () ()})}
	{IF_ALIVE 6 ({CREATE_UNIT 1 ({UNIT}) 18 13 () ()})}
	{IF_ALIVE 7 ({CREATE_UNIT 1 ({UNIT}) 12 21 () ()})}
#enddef

#define TS_SPAWNS
	{ON_TURN 2 (
		{TS_SPAWN1 "Footpad"}{TS_SPAWN1 "Peasant"}
		{TS_SPAWN2 "Bowman"}{TS_SPAWN2 "Cavalryman"}
	)}
	{ON_TURN 5 (
		{TS_SPAWN1 "Thief"}{TS_SPAWN1 "Poacher"}
		{TS_SPAWN2 "Dwarvish Guardsman"}{TS_SPAWN2 "Dwarvish Fighter"}
	)}
	{ON_TURN 8 (
		{TS_SPAWN1 "Elvish Archer"}{TS_SPAWN1 "Elvish Shaman"}
		{TS_LAKE_SPAWN "Merman Hunter"}
		{TS_SPAWN2 "Elvish Archer"}
	)}
	{ON_TURN 11 (
		{TS_SPAWN1 "Orcish Slayer"}
		{TS_LAKE_SPAWN "Naga Fighter"}
		{TS_SPAWN2 "Troll Hero"}{TS_SPAWN2 "Troll Whelp"}
	)}
	{ON_TURN 14 (
		{TS_SPAWN1 "Drake Warrior"}{TS_SPAWN1 "Drake Glider"}
		{TS_SPAWN2 "Fire Drake"}{TS_SPAWN2 "Drake Fighter"}
	)}
	{ON_TURN 17 (
		{TS_SPAWN1 "Death Knight"}{TS_SPAWN1 "Walking Corpse"}{TS_SPAWN1 "Walking Corpse"}{TS_SPAWN1 "Walking Corpse"}{TS_SPAWN1 "Vampire Bat"}
		{TS_SWAMP_SPAWN "Tentacle of the Deep"}
		{TS_SPAWN2 "Lich"}{TS_SPAWN2 "Walking Corpse"}{TS_SPAWN2 "Walking Corpse"}{TS_SPAWN2 "Walking Corpse"}{TS_SPAWN2 "Vampire Bat"}
	)}
	{ON_TURN 20 (
		{TS_SPAWN1 "Drake Enforcer"}
		{TS_LAKE_SPAWN "Mermaid Diviner"}{TS_LAKE_SPAWN "Merman Entangler"}
		{TS_SPAWN2 "Drake Enforcer"}
	)}
	{ON_TURN 23 (
		{TS_SPAWN1 "Dark Sorcerer"}
		{TS_LAKE_SPAWN "Shadow"}{TS_LAKE_SPAWN "Shadow"}{TS_LAKE_SPAWN "Shadow"}
		{TS_SPAWN2 "Dark Sorcerer"}
	)}
	{ON_TURN 26 (
		{TS_SPAWN1 "Goblin Rouser"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}{TS_SPAWN1 "Goblin Spearman"}
		{TS_SWAMP_SPAWN "Cuttle Fish"}
		{TS_SPAWN2 "Goblin Rouser"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}{TS_SPAWN2 "Goblin Spearman"}
	)}
#enddef

[multiplayer]
	id=multiplayer_6p_Team_Survival
	name= _ "6p - Team Survival"
	map_data="{TS_MAP_DATA}"

	description= _ "Scenario where the objective is to survive for as long as possible."
	experience_modifier=70
	turns=32
	turn_at=1
	victory_when_enemies_defeated=yes

	{ON_PRESTART (
		{SET_OBJECTIVES 0 (_ "Survive for 32 turns.") (_ "Hint: Learning the enemy spawnpoints and types helps alot.") (
			{VICTORY_CONDITION (_ "Survive all enemy attacks.")}
			{DEFEAT_CONDITION (_ "Death of your team leaders.")}
		)}
	)}
	{ON_START (
		{TS_SET_LABELS}
		{TS_OPEN_WALLS}
	)}

	{TS_SPAWNS}

	{ON_TURN 25 {TS_BUILD_CASTLE}}
	{ON_TURN 26 {TS_OPEN_CASTLE}}
	{ON_TURN 32 (
		{IF_ALIVE 2 ({ENDGAME victory})}
		{IF_ALIVE 3 ({ENDGAME victory})}
		{IF_ALIVE 4 ({ENDGAME victory})}
		{IF_ALIVE 5 ({ENDGAME victory})}
		{IF_ALIVE 6 ({ENDGAME victory})}
		{IF_ALIVE 7 ({ENDGAME victory})}
	)}

	{ON_VICTORY (
		{MESSAGE narrator (units/elves-wood/shyde.png) (Faery) (_ "Congratulations for surviving the map that so many people claim is impossible. Frankly, I haven't got a clue as to how you did it, so send me the replay by mail to: roze@roze.mine.nu. Thank You!")}
	)}
	{ON_DEFEAT (
		{MESSAGE narrator (units/undead/wraith.png) (Death) (_ "You have lost this game, but fear not. You can always try again. And again. And again. *Muahahaha*")}
	)}

	{DEFAULT_MUSIC_PLAYLIST}

	{DAWN}
	{MORNING}
	{AFTERNOON}
	{DUSK}
	{FIRST_WATCH}
	{SECOND_WATCH}

	{SIDE_COMPUTER 1 Attacker (Attacker) 1000 47 () (
		leader_value=7.0
		aggression=1.0
	)}
	{SIDE_PLAYER 2 Defenders-1 (North-West) 125 -2 ()}
	{SIDE_PLAYER 3 Defenders-2 (North-East) 125 -2 ()}
	{SIDE_PLAYER 4 Defenders-3 (Middle-East) 125 -2 ()}
	{SIDE_PLAYER 5 Defenders-4 (South-East) 125 -2 ()}
	{SIDE_PLAYER 6 Defenders-5 (South-West) 125 -2 ()}
	{SIDE_PLAYER 7 Defenders-6 (Middle-West) 125 -2 ()}

[/multiplayer]

#undef TS_MAP_DATA
#undef TS_WALL_MASK_NORTH
#undef TS_WALL_MASK_NORTH_EAST
#undef TS_WALL_MASK_NORTH_WEST
#undef TS_WALL_MASK_SOUTH
#undef TS_WALL_MASK_SOUTH_EAST
#undef TS_WALL_MASK_SOUTH_WEST
#undef TS_CASTLE_MASK
#undef TS_OPEN_MASK_NORTH_WEST
#undef TS_OPEN_MASK_NORTH_EAST
#undef TS_OPEN_MASK_EAST
#undef TS_OPEN_MASK_SOUTH_WEST
#undef TS_OPEN_MASK_SOUTH_EAST
#undef TS_OPEN_MASK_WEST
#undef TS_SET_LABELS
#undef TS_OPEN_WALLS
#undef TS_BUILD_CASTLE
#undef TS_OPEN_CASTLE
#undef TS_SPAWN1
#undef TS_SPAWN2
#undef TS_SWAMP_SPAWN
#undef TS_LAKE_SPAWN
#undef TS_HOME_SPAWN
#undef TS_SPAWNS
