[building_rule]
	map="
C
  C
!KC"
	image_background="castle-wall-concave-$R"
	rotations=ne,e,se,sw,w,nw
[/building_rule]

[building_rule]
	map="
1
  1
C"

	[tile]
		pos=1
		type=!KC
	[/tile]
	image_background="castle-wall-convex-$R"
	rotations=ne,e,se,sw,w,nw
[/building_rule]

[building_rule]
	map="
C
  C
1"
	[tile]
		# Using anchors for demonstrations's sake
		pos=1
		type=K
	[/tile]

	image_foreground="keep-inside-$R"
	rotations=ne,e,se,sw,w,nw
[/building_rule]

[building_rule]
	map="
!KC

K"
	[tile]
		# Using [tile] element just for demonstration's sake
		x=1
		y=0
		type=!KC
	[/tile]
	image_background="keep-wall-$R"
	rotations=ne,e,se,sw,w,nw
[/building_rule]

[building_rule]
	map="
C
  !KC
K"

	image_foreground="keep-wall-0-$R"
	rotations=ne,e,se,sw,w,nw
[/building_rule]

[building_rule]
	map="
!KC
  C
K"

	image_foreground="keep-wall-1-$R"
	rotations=ne,e,se,sw,w,nw
[/building_rule]

# Some test cases

[building_rule]
	map="
.   1
  .
.   1
  .
.   1
  1
1"
	[tile]
		pos=1
		type=m
	[/tile]

	probability=30
	no_flag="built-m"
	set_flag="built-m"
	
	image_background="mountains-test"
[/building_rule]

[building_rule]
	[tile]
		x=0
		y=0
		type=m
	[/tile]
	probability=20
	no_flag="built-m"
	set_flag="built-m"
	image_background="mountains-test-2"
[/building_rule]


# A stupid test case, just to demonstrate the has_flag condition

#[building_rule]
#
#	[tile]
#		x=0
#		y=0
#		type=C
#		set_flag=moo
#	[/tile]
#
#[/building_rule]
#
#[building_rule]
#	[tile]
#		x=0
#		y=0
#		type=C
#	[/tile]
#	[tile]
#		x=0
#		y=1
#		type=*
#		has_flag="moo"
#	[/tile]
#	image_background=schmurgle
#[/building_rule]
