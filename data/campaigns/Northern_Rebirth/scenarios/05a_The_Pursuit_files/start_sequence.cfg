#textdomain wesnoth-nr

    id=pursuit
    name= _ "The Pursuit"

    map_data="{campaigns/Northern_Rebirth/maps/the_pursuit.map}"
# There is no turn limit in the scenario, whole map is underground and a special event needs to occur to achieve victory
    turns=-1
    {UNDERGROUND}
    next_scenario=old_friend
    victory_when_enemies_defeated=no
    {SCENARIO_MUSIC "underground.ogg"}

# Players side
    [side]
        type=Peasant
        description=Tallin
        user_description=_ "Tallin"
        canrecruit=yes
        side=1
        controller=human
        {GOLD4 700 600 400 300}
        recruit=Peasant,Woodsman,Thug,Poacher,Footpad
        team_name=rebels
        shroud=yes
    [/side]
# Main enemy
    [side]
        type=Ancient Lich
        description=Malifor
        user_description= _ "Malifor"
        profile=portraits/Malifor.jpg
        canrecruit=yes
        side=2
        team_name=undead
        recruit=Deathblade,Revenant,Bone Shooter,Necromancer
        gold=0
    [/side]
# Enemies to the immediate left and right of the first chamber
    [side]
        type=Death Knight
        description=Hettel
        user_description=_ "Hettel"
        canrecruit=yes
        side=3
        team_name=undead
		{GOLD4 50 100 150 250}
		{INCOME4 4 10 16 22}
		#ifdef NEWBIE
			recruit=Skeleton,Skeleton Archer
		#endif
		#ifdef EASY
			recruit=Skeleton,Skeleton Archer,Revenant
		#endif
		#ifdef NORMAL
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter
		#endif
		#ifdef HARD
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter,Deathblade
		#endif
    [/side]

    [side]
        type=Death Knight
        description=Thor
        canrecruit=yes
        side=4
        team_name=undead
		{GOLD4 50 100 150 250}
		{INCOME4 4 10 16 22}
		#ifdef NEWBIE
			recruit=Skeleton,Skeleton Archer
		#endif
		#ifdef EASY
			recruit=Skeleton,Skeleton Archer,Revenant
		#endif
		#ifdef NORMAL
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter
		#endif
		#ifdef HARD
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter,Deathblade
		#endif
    [/side]
# Dungeon guard
    [side]
        type=Death Knight
        description=Trevor
        user_description=_ "Trevor"
        canrecruit=yes
        side=5
        team_name=undead
        gold=0
		#ifdef NEWBIE
			recruit=Skeleton,Skeleton Archer
		#endif
		#ifdef EASY
			recruit=Skeleton,Skeleton Archer,Revenant
		#endif
		#ifdef NORMAL
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter
		#endif
		#ifdef HARD
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter,Deathblade
		#endif
    [/side]
# Treasury guards
    [side]
        type=Death Knight
        description=Author
        user_description=_ "Author"
        canrecruit=yes
        side=6
        team_name=undead
        gold=0
		#ifdef NEWBIE
			recruit=Skeleton,Skeleton Archer
		#endif
		#ifdef EASY
			recruit=Skeleton,Skeleton Archer,Revenant
		#endif
		#ifdef NORMAL
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter
		#endif
		#ifdef HARD
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter,Deathblade
		#endif
    [/side]

    [side]
        type=Death Knight
        description=Sam
        user_description=_ "Sam"
        canrecruit=yes
        side=7
        team_name=undead
        gold=0
		#ifdef NEWBIE
			recruit=Skeleton,Skeleton Archer
		#endif
		#ifdef EASY
			recruit=Skeleton,Skeleton Archer,Revenant
		#endif
		#ifdef NORMAL
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter
		#endif
		#ifdef HARD
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter,Deathblade
		#endif
    [/side]
# Study Guards
    [side]
        type=Death Knight
        description=Boblin
        user_description=_ "Boblin"
        canrecruit=yes
        side=8
        team_name=undead
        gold=0
		#ifdef NEWBIE
			recruit=Skeleton,Skeleton Archer
		#endif
		#ifdef EASY
			recruit=Skeleton,Skeleton Archer,Revenant
		#endif
		#ifdef NORMAL
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter
		#endif
		#ifdef HARD
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter,Deathblade
		#endif
    [/side]

    [side]
        type=Death Knight
        description=Antrasis
        canrecruit=yes
        side=9
        team_name=undead
        gold=0
		#ifdef NEWBIE
			recruit=Skeleton,Skeleton Archer
		#endif
		#ifdef EASY
			recruit=Skeleton,Skeleton Archer,Revenant
		#endif
		#ifdef NORMAL
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter
		#endif
		#ifdef HARD
			recruit=Skeleton,Skeleton Archer,Revenant,Bone Shooter,Deathblade
		#endif
    [/side]

    [event]
        name=prestart
	# Place images
	# Whole lot of doors
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 23 7}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 22 9}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 22 10}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 27 13}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 19 2}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 19 3}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 19 4}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 9 3}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 9 4}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 34 28}
		{PLACE_IMAGE scenery/dwarven-doors-closed.png 35 34}
	# Prisoners
		{PLACE_IMAGE units/human-magi/white-mage.png 9 40}
		{PLACE_IMAGE items/cage.png 9 40}
		{PLACE_IMAGE "units/human-magi/white-mage+female.png" 6 39}
		{PLACE_IMAGE items/cage.png 6 39}
	    {PLACE_IMAGE units/elves-wood/druid.png 3 40}
		{PLACE_IMAGE items/cage.png 3 40}
		{PLACE_IMAGE units/drakes/burner.png 2 32}
		{PLACE_IMAGE items/cage.png 2 32}
	# Corpses in the water.
		{PLACE_IMAGE units/undead/soulless-die-3.png 37 19}
		{PLACE_IMAGE units/undead/soulless-die-3.png 38 13}
		{PLACE_IMAGE units/undead/soulless-die-3.png 35 7}
		{PLACE_IMAGE units/undead/soulless-die-3.png 27 5}
	# Signposts
		{PLACE_IMAGE scenery/signpost.png 15 34}
		{PLACE_IMAGE scenery/signpost.png 15 32}
		{PLACE_IMAGE scenery/signpost.png 25 32}
		{PLACE_IMAGE scenery/signpost.png 24 34}
		{PLACE_IMAGE scenery/signpost.png 24 28}
		{PLACE_IMAGE scenery/signpost.png 19 28}
		{PLACE_IMAGE scenery/signpost.png 15 29}
		{PLACE_IMAGE scenery/signpost.png 34 27}
		{PLACE_IMAGE scenery/signpost.png 32 36}
	# Treasury chests
		{PLACE_IMAGE items/chest.png 6 22}
		{PLACE_IMAGE items/chest.png 17 22}
		{PLACE_IMAGE items/chest.png 17 20}
		{PLACE_IMAGE items/chest.png 5 20}
		{PLACE_IMAGE items/chest.png 6 16}
		{PLACE_IMAGE items/chest.png 9 15}
	# Rod of justice
		{PLACE_IMAGE items/staff.png 3 7}
		
	# Place holy water - uses core macro to set up required pickup event as well
		{OBJ_POTION_HOLY 34 26 object7_holywater}
		{OBJ_POTION_HOLY 33 27 object7_holywater2}
		{OBJ_POTION_HOLY 33 28 object7_holywater3}
		{OBJ_POTION_HOLY 31 37 object7_holywater4}
		{OBJ_POTION_HOLY 32 37 object7_holywater5}
		{OBJ_POTION_HOLY 33 37 object7_holywater6}
		
	# Set up some variables that need an initial value
		{VARIABLE back_door_opened no}
		{VARIABLE main_door_opened no}
		{VARIABLE spider_door_opened no}
		{VARIABLE confronted_malifor no}
		{VARIABLE treasury_alerted no}
    [/event]

    [event]
        name=start

	# Malifor escapes into shroud	
        [hide_unit]
            x=20
            y=39
        [/hide_unit]
        [terrain]
            x=20
            y=39
            terrain=Rr
        [/terrain]
        [message]
            speaker=narrator
            message= _ "Leaving most of the dwarves behind, Tallin and the rest of his party set off to pursue the Sorcerer."
            image=wesnoth-icon.png
        [/message]
        [move_unit_fake]
            type=Ancient Lich
            side=2
            x=20,20,20,20,20,20,20
            y=39,38,37,36,35,34,33
        [/move_unit_fake]
        [unhide_unit]
        [/unhide_unit]
	# Recall some units
        {SUPPORTER}
        [recall]
            role=Supporter
        [/recall]
        [role]
            race=Dwarf
            role=follower
        [/role]
        [recall]
            role=follower
        [/recall]
        [recall]
            description=Camerin
        [/recall]
	# Set up an army of guarding Draugs, first two have an role for 'sighted' events
		{NOTRAIT_UNIT 6 Draug 10 23}
		[+unit]
			role=Treasury Guard
            ai_special=guardian
        [/unit]
		{NOTRAIT_UNIT 2 Draug 26 19}
        [+unit]
            role=Study Guard
            ai_special=guardian
        [/unit]
        {NOTRAIT_UNIT 2 Draug 18 11}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 20 11}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 20 14}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 21 13}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 23 16}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 23 22}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 23 24}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 24 14}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 26 21}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 26 23}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 26 25}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 28 20}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 28 22}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 28 24}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Draug 28 26}
		[+unit]
			ai_special=guardian
		[/unit]
	# And larger army of Revenants
        {NOTRAIT_UNIT 2 Revenant 2 35}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 4 37}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 4 19}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 6 21}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 6 25}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 6 26}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 6 30}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 6 32}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 6 36}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 7 15}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 7 38}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 9 36}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 10 17}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 10 19}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 10 21}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 11 15}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 12 17}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 12 23}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 13 9}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 13 20}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 14 18}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 15 9}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 19 21}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 19 24}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 19 27}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 21 21}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 21 24}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 21 27}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 33 30}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 33 33}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 34 30}
		[+unit]
			ai_special=guardian
		[/unit]
        {NOTRAIT_UNIT 2 Revenant 34 32}
		[+unit]
			ai_special=guardian
		[/unit]
		{NOTRAIT_UNIT 2 Revenant 21 35}
		[+unit]
			description=Revenant
            ai_special=guardian
        [/unit]
		{NOTRAIT_UNIT 2 Revenant 19 35}
		[+unit]
			ai_special=guardian
		[/unit]
	# Initial dialogue and objectives
        [message]
            description=Tallin
            message= _ "There he goes! Quick, get him!"
        [/message]
        [message]
            description=Revenant
            message= _ "I don't think so, you living vermin."
        [/message]
        [message]
            description=Tallin
            message= _ "We'll have to kill these Revenants to get after him. There is only two of them, so they shouldn't last long."
        [/message]
        [objectives]
            side=1
            [objective]
                description= _ "Get past the revenants."
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Tallin"
                condition=lose
            [/objective]
        [/objectives]
    [/event]
# Player enters the first chamber - some more initial dialogues and objectives
    [event]
        name=moveto
        [filter]
            side=1
            x=19-21
            y=30-32
        [/filter]
        [message]
            speaker=unit
            message= _ "Uh... Which way?"
        [/message]
        [message]
            description=Tallin
            message= _ "Blast it! We lost him."
        [/message]
        [message]
            description=Tallin
            message= _ "It makes no difference in the end, because we will hunt him down and crush him to powder. HEAR THAT, YOU OLD SKELETON?"
        [/message]
        [message]
            description=Malifor
            message= _ " *faint cackle of laughter in the distance*"
        [/message]
        [message]
            description=Camerin
            message= _ "Yeah! This is gonna be fun!"
        [/message]
        [message]
            description=Tallin
            message= _ "Let us proceed with caution. Nobody is to go off by himself. We don't know what could be lurking in these tunnels."
        [/message]
        [objectives]
            side=1
            [objective]
                description= _ "Find Malifor and Destroy Him"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Tallin"
                condition=lose
            [/objective]
        [/objectives]
    [/event]
