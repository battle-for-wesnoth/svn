#textdomain wesnoth-aoi
[scenario]
	name=_ "Wasteland"
	id=3_Wasteland
	map_data="{campaigns/An_Orcish_Incursion/maps/wasteland.map}"
    turns=24
    next_scenario=4_Valley_of_Trolls

	{DEFAULT_SCHEDULE}

	{SCENARIO_MUSIC elvish-theme.ogg}
	{EXTRA_SCENARIO_MUSIC knolls.ogg}
	{EXTRA_SCENARIO_MUSIC nunc_dimittis.ogg}

	[side]
		type="Elvish Lord"
		id=Erlornas
        canrecruit=yes

		side=1
		controller=human
		team_name=Elves
		user_team_name=_ "Elves"
		{INCOME 12 9 9}
		recruit="Elvish Scout,Elvish Fighter,Elvish Archer,Elvish Shaman"
    [/side]
	
    [side]
		type="Orcish Warlord"
        id=Gnargha
        canrecruit=yes
		name=_ "Gnargha"
		
		side=2
		{GOLD 100 120 160}
		{INCOME 8 12 12}
		team_name=Orcs
		user_team_name=_ "Orcs"
		controller=ai
		fog=no
		shroud=no
		recruit="Orcish Archer, Orcish Crossbowman, Orcish Grunt, Orcish Warrior, Wolf Rider"
		[ai]
			grouping=offensive
			attack_depth=5
		[/ai]
	[/side]

	[story]
		[part]
			background=maps/wesnoth.png
			story= _ "As they fared further north the green forest thinned around them slowly fading into a barren and fallow country. The signs were obvious and unmistakable - tree stumps, an occasional half-rotten tree felled long ago and dead wood around them in scarce grass. This had been forest once, just as the one they called home. It has been murdered."
		[/part]
		[part]
			background=maps/wesnoth.png
			story= _ "There was no trail to be found here, wind and rain took care of that well enough as always on an open ground, but fortunately there was no need of one. There was smoke on the horizon, whoever did this was settled not far away."
		[/part]
		[part]
			background=maps/wesnoth.png
			story= _ "Erlornas was fairly sure he was going to find orcs there. No dwarf tribe would break the ancient treaty in this way and humans weren't this... methodical and did not travel in sufficiently large numbers to the north they found to cold and damp for comfort. The big question was, would he find Rualsha here?"
		[/part]
		[part]
			background=maps/wesnoth.png
			story= _ "As it soon proved, he wouldn't. True, it was an orcish camp, but the tribe it housed was by far too small to impress fear on other orcs. Come next morning, the elves were prepared for battle."
		[/part]
		[part]
			background="map.jpg"
			show_title=yes
			[image]
				x=222
				y=282
				file="misc/dot.png"
				delay=250
			[/image]
			[image]
				x=208
				y=285
				file="misc/dot.png"
				delay=250
			[/image]
			[image]
				x=193
				y=288
				file="misc/dot.png"
				delay=250
			[/image]
			[image]
				x=176
				y=288
				file="misc/dot.png"
				delay=250
			[/image]
			[image]
				x=120
				y=261
				file="units/elves-wood/lord.png~TC(1,magenta)"
				delay=500
			[/image]
			[image]
				x=60
				y=210
				file="units/orcs/warlord.png~TC(2,magenta)"
				delay=500
			[/image]
			[image]
				x=95
				y=290
				file="misc/cross.png"
				delay=500
			[/image]
			[image]
				x=119
				y=273
				file="misc/cross.png"
				delay=500
			[/image]
			[image]
				x=139
				y=256
				file="misc/cross.png"
				delay=500
			[/image]
		[/part]
	[/story]

    [event]
        name=prestart

		[objectives]
			#ifdef EASY
				note=_ "Hint:
There are no villages in this scenario - you must use healers instead. Use hit and run tactics to weaken enemy units who cannot heal themselves."
			#endif
			[objective]
				description=_ "Defeat Gnargha"
				condition=win
			[/objective]
			[objective]
				description=_ "Death of Erlornas"
				condition=lose
			[/objective]
			[objective]
				description=_ "Time runs out"
				condition=lose
			[/objective]
		[/objectives]

		{VARIABLE orcs_recruited 0}
		{VARIABLE camp_gold 400}
		{VARIABLE_OP modulo_factor random 2..4}
	[/event]
	
	[event]
		name=recruit
		[filter]
			side=2
		[/filter]
		
		{VARIABLE temporary $orcs_recruited}
		{VARIABLE_OP temporary modulo $modulo_factor}

		[if]
			[variable]
				name=temporary
				equals=0
			[/variable]
			[then]
				[disallow_recruit]
					side=2
					recruit="Orcish Archer, Orcish Grunt, Wolf Rider"
				[/disallow_recruit]
				[allow_recruit]
					side=2
					recruit="Orcish Crossbowman, Orcish Warrior"
				[/allow_recruit]
				{VARIABLE_OP modulo_factor random 2..4}
			[/then]
			[else]
				[disallow_recruit]
					side=2
					recruit="Orcish Crossbowman, Orcish Warrior"
				[/disallow_recruit]
				[allow_recruit]
					side=2
					recruit="Orcish Archer, Orcish Grunt, Wolf Rider"
				[/allow_recruit]
			[/else]
		[/if]

		{VARIABLE_OP camp_gold add -$unit.cost}
		{VARIABLE_OP orcs_recruited add 1}
		{CLEAR_VARIABLE temporary}
	[/event]
	
	[event]
        name=start

		[role]
			race=elf
			[not]
				canrecruit=yes
			[/not]
			role=Adviser
		[/role]

		[recall]
			role=Adviser
		[/recall]

		[message]
			role=Adviser
			message=_ "Lord... I'm... I'm full of grief. This senseless destruction is... overwhelming."
		[/message]
		[message]
			id=Erlornas
			message=_ "Yes. And this is the threat we were blind to and are now facing. This tribe is small, yet we must drive them back to the north. They must have no footholds south of the hills."
		[/message]
		[message]
			id=Gnargha
            message=_ "Elves!? This means Urugha failed and his spirit will suffer greatly for his weakness. So be it!"
		[/message]
		[message]
			id=Gnargha
			message=_ "Rise grunts! We have great fight upon us! Let your rage flow freely! Let your blades slay all! First one to draw blood will feast by my fire this night!"
		[/message]
		[message]
            id=Erlornas
			message=_ "Aim true men, with wit and courage the day will be ours. And spare no-one, there can be no orc south of the hills less we'll never have peace again."
		[/message]
    [/event]

	[event]
		name=die
		[filter]
			id=Gnargha
		[/filter]
		
		[message]
			id=Gnargha
			message=_ "You won... Elf... But it changes... Nothing... (*cough*)"
		[/message]
		[message]
			id=Gnargha
			message=_ "We found the way... Now... We will come in numbers... (*cough*) You can't imagine..."
		[/message]
		[message]
			id=Gnargha
			message=_ "(*cough*) I'll be waiting... Among the dead..."
		[/message]
		[message]
			speaker=narrator
			message=_ "At that point orcish chieftain finally fell overcame by his wounds. Elves found themselves in half ruined camp littered with bodies of both sides, there was not an orc in sight, neither of them asked for mercy. Elves didn't take prisoners."
		    image=wesnoth-icon.png
		[/message]
	[/event]
	
    [event]
		name=victory

		[message]
			role=Adviser
			message=_ "It's done lord. No-one escaped. No-one tried to escape. I'm... disturbed."
		[/message]
		[message]
			id=Erlornas
			message=_ "Good. But their disregard for self-perseverance is astounding. As is the ferocity when defending what they claim as own. Have the scouts found others this side of the hills?"
		[/message]
		[message]
			role=Adviser
			message=_ "No lord. But trolls were spotted in the hills ahead. Do we really need to cross north?"
		[/message]
		[message]
			id=Erlornas
			message=_ "Yes. The council has spoken to me in the dreams. They are troubled. Reinforcements have been sent after us, but we need to press on. Tell the men to rest, we'll move out at dawn."
		[/message]
		[if]
			[variable]
				name=camp_gold
				greater_than=100
			[/variable]
			[then]
				[message]
					role=Adviser
					message=_ "What about the loot lord? We found supplies worth over a hundred gold in the camp."
				[/message]
				[message]
					id=Erlornas
					message=_ "Distribute some among the men, save rest for the road. This country is a wasteland now and we won't find much on the road."
				[/message]
			[/then]
		[/if]
		[if]
			[variable]
				name=camp_gold
				greater_than=50
			[/variable]
			[variable]
				name=camp_gold
				less_than_equal_to=100
			[/variable]
			[then]
				[message]
					role=Adviser
					message=_ "We found some supplies when searching the camp, but nothing much. What is to be done with them?"
				[/message]
				[message]
					id=Erlornas
					message=_ "Save it for the road. There is little to be found in this now barren country."
				[/message]
			[/then]
		[/if]
		[if]
			[variable]
				name=camp_gold
				greater_than=0
			[/variable]
			[then]
				[gold]
					amount=$camp_gold
				[/gold]
			[/then]
		[/if]
		{CLEAR_VARIABLE camp_gold}
		{CLEAR_VARIABLE orcs_recruited}
		{CLEAR_VARIABLE modulo_factor}
	[/event]
	
	[event]
		name=die
		[filter]
			id=Erlornas
		[/filter]
		
		[message]
			speaker=narrator
			message=_ "Lord Erlornas never saw the blade that hit him. He died on the spot without a chance to issue last commands or farewells, without him his wardens soon fell into confusion and loosing hart withdrew from the battle."
		    image=wesnoth-icon.png
		[/message]
		[message]
			speaker=narrator
			message=_ "When reinforcements finally arrived, elves managed to dislodge the orcish tribe. But threat from the north still remained unresolved and loomed large over their future."
		    image=wesnoth-icon.png
		[/message]
	[/event]
	
	[event]
		name=time over
		
		[message]
			role=Adviser
			message=_ "We can't carry on Lord, the men are to tired. We have to fall back."
		[/message]
		[message]
			id=Erlornas
			message=_ "Damn it. Sound the retreat, we'll try again when reinforcements arrive."
		[/message]
		[message]
			speaker=narrator
			message=_ "They waited next few days before expected relief caught up with them. Next morning they took the field and couldn't notice that the number of orcs was far greater than on previous occasion. The battle ended in a draw, the war raged on for years..."
		    image=wesnoth-icon.png
		[/message]
	[/event]
[/scenario]
