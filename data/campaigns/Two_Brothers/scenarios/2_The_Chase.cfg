#textdomain wesnoth-tb
[scenario]
    id=2_The_Chase
    name= _ "The Chase"
    map_data="{campaigns/Two_Brothers/maps/2_The_Chase.map}"
    next_scenario=3_Guarded_Castle
#ifdef EASY
    turns=28
#endif
#ifdef HARD
    turns=24
#endif
    victory_when_enemies_defeated=no

    [music]
        name=elf-land.ogg
        ms_before=500
    [/music]
    [music]
        name=knolls.ogg
        ms_before=500
        append=yes
    [/music]
    [music]
        name=wanderer.ogg
        ms_before=500
        append=yes
    [/music]
    [music]
        name=legends_of_the_north.ogg
        ms_before=500
        append=yes
    [/music]
    [music]
        name=vengeful.ogg
        ms_before=500
        append=yes
    [/music]

    {DUSK}
    {FIRST_WATCH}
    {SECOND_WATCH}
    {DAWN}
    {MORNING}
    {AFTERNOON}

    [event]
#ifdef EASY
        [terrain]
            x=10
            y=44
            terrain=Gg^Vh
        [/terrain]
        [terrain]
            x=13
            y=42
            terrain=Gg^Vh
        [/terrain]
        [terrain]
            x=10
            y=26
            terrain=Gg^Vh
        [/terrain]
        [terrain]
            x=3
            y=34
            terrain=Gg^Vh
        [/terrain]
#endif
        name=prestart
        [objectives]
            side=1
            [objective]
                description= _ "Fight your way through the woods before the kidnappers escape"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Arne"
                condition=lose
            [/objective]
            [objective]
                description= _ "Turns run out"
                condition=lose
            [/objective]
        [/objectives]
        [remove_shroud]
            side=1
            x=0-20
            y=15-54
        [/remove_shroud]
    [/event]

    {PLACE_IMAGE scenery/signpost.png 10 1}

    [side]
#ifdef EASY
        gold=180
        income=10
#endif
#ifdef HARD
        gold=120
#endif
        type=Knight
        id=Arne
        user_description= _ "Arne"
        unrenamable=yes
        side=1
        canrecruit=yes
        controller=human
        recruit=Horseman,Bowman,Spearman,Footpad
        team_name=good
        shroud=yes
    [/side]

    {STARTING_VILLAGES 1 7}

    [side]
#ifdef EASY
        gold=25
#endif
#ifdef HARD
        gold=60
#endif
        type=Elvish Rider
        id=Nil-Galion
        user_description= _ "Nil-Galion"
        unrenamable=yes
        side=2
        canrecruit=yes
        recruit=Elvish Scout
        income=-8
        team_name=elves
        recruitment_pattern=scout

        [unit]
            side=2
            type=Elvish Scout
            x=15
            y=20
        [/unit]
        [unit]
            side=2
            type=Elvish Fighter
            x=5
            y=13
        [/unit]
        [unit]
            side=2
            type=Elvish Scout
            x=4
            y=36
        [/unit]
        [unit]
            side=2
            type=Elvish Scout
            x=7
            y=46
        [/unit]
        [unit]
            side=2
            type=Elvish Scout
            x=15
            y=35
        [/unit]
#ifdef HARD
        [unit]
            side=2
            type=Elvish Scout
            x=7
            y=25
        [/unit]
        [unit]
            side=2
            type=Elvish Scout
            x=10
            y=33
        [/unit]
        [unit]
            side=2
            type=Elvish Hero
            x=11
            y=45
        [/unit]
        [unit]
            side=2
            type=Elvish Rider
            x=15
            y=23
        [/unit]
        [unit]
            side=2
            type=Wose
            x=7
            y=29
        [/unit]
#endif
    [/side]

#ifdef EASY
    {STARTING_VILLAGES 2 17}
#endif
#ifdef HARD
    {STARTING_VILLAGES 2 30}
#endif

    [event]
        name=start

        #{SCATTER_IMAGE (terrain=Gs^Fp) 24 scenery/pine2.png}

        [role]
            type=Horseman
            role=speaker
        [/role]
        [recall]
            role=speaker
        [/recall]

        [message]
            speaker=narrator
            image="wesnoth-icon.png"
            message= _ "The kidnappers fled north through the forest, and Arne made to follow them, although his horsemen would be at a disadvantage."
        [/message]
        [message]
            speaker=narrator
            image="wesnoth-icon.png"
            message= _ "Sounds of a scuffle were heard from the forest."
        [/message]
        [message]
            speaker=Arne
            message= _ "Come on men. A bracing walk in the woods never hurt anyone, did it?"
        [/message]
        [message]
            speaker=Nil-Galion
            message= _ "You there! Halt and explain yourself."
        [/message]
        [message]
            speaker=Arne
            message= _ "We're chasing after some men who kidnapped my brother!"
        [/message]
        [message]
            speaker=Nil-Galion
            message= _ "Those men had some great arguments persuading me to not allow you to enter this forest. Any further, and you will die."
        [/message]
        [message]
            role=speaker
            message= _ "A glorious combat at last, against mounted enemies!"
        [/message]
    [/event]

    [event]
        name=moveto
        [filter]
            side=1
            x=1-19
            y=1-12
        [/filter]

        [unit]
            type=Dark Adept
            id=Muff Toras
            user_description= _ "Muff Toras"
            {IS_HERO}
            unrenamable=yes
            x=9
            y=4
            ai_special=guardian
            side=2
        [/unit]
#ifdef EASY
        [unit]
            type=Skeleton
            x=9
            y=5
            ai_special=guardian
            side=2
        [/unit]
        [unit]
            type=Skeleton
            x=9
            y=3
            ai_special=guardian
            side=2
        [/unit]
#endif
#ifdef HARD
        [unit]
            type=Revenant
            x=9
            y=5
            ai_special=guardian
            side=2
        [/unit]
        [unit]
            type=Revenant
            x=9
            y=3
            ai_special=guardian
            side=2
        [/unit]
#endif
        [remove_shroud]
            side=1
            x=0-20
            y=0-15
        [/remove_shroud]

        [message]
            speaker=unit
            message= _ "I see them! There they are!"
        [/message]
        [message]
            speaker=Muff Toras
            message= _ "Curses! I hope the reinforcements get here so I can escape soon."
        [/message]
        [objectives]
            side=1
            [objective]
                description= _ "Kill the Dark Adept before his reinforcements arrive"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Arne"
                condition=lose
            [/objective]
            [objective]
                description= _ "Turns run out"
                condition=lose
            [/objective]
        [/objectives]
    [/event]

    [event]
        name=turn 12
        [message]
            speaker=Arne
            message= _ "Come on, men, let's catch those kidnappers!"
        [/message]
    [/event]

    [event]
        name=die
        [filter]
            id=Muff Toras
        [/filter]
        [message]
            speaker=unit
            message= _ "Hah! You got me alright, but what does that help? No harm telling you now, I suppose. Your precious mage is safely locked away in our dungeons. I was set up to be a decoy."
        [/message]
        [message]
            speaker=Arne
            message= _ "Nooo! Tricked again. Tell us where he is and we shall spare your miserable life."
        [/message]

        {VARIABLE first_password_1 _"Sithrak"}
        {VARIABLE first_password_2 _"Eleben"}
        {VARIABLE first_password_3 _"Jarlom"}
        {VARIABLE first_password_4 _"Hamik"}
        {VARIABLE_OP first_password_number random "1..4"}

        {VARIABLE second_password_1 _"Akranbral"}
        {VARIABLE second_password_2 _"Drakanal"}
        {VARIABLE second_password_3 _"Xaskanat"}
        {VARIABLE second_password_4 _"Katklagad"}
        {VARIABLE_OP second_password_number random "1..4"}

        [message]
            speaker=unit
            message= _ "Three days ride to the northeast, in a deserted castle. The passwords to the guards are $first_password_$first_password_number and $second_password_$second_password_number|."
        [/message]
        [message]
            speaker=Arne
            message= _ "Thank you. Leave him, men, we ride East."
        [/message]

#ifdef EASY
        [move_unit_fake]
            type=Iron Mauler
            side=1
            x=1,1,3,4,8
            y=6,4,3,3,1
        [/move_unit_fake]
        [unit]
            id=Brena
            user_description= _ "Brena"
            type=Iron Mauler
            side=1
            [modifications]
                {TRAIT_STRONG}
                {TRAIT_LOYAL}
            [/modifications]
            x=8
            y=1
        [/unit]
        [message]
            speaker=Brena
            message= _ "Greetings, I am Brena. I saw you fighting the foul undead. I like nothing better than smashing those foul skeletons and their ilk. Though I came too late to help in this fight, I would like to aid you in your forthcoming endeavors."
        [/message]
        [message]
            type=Horseman
            message= _ "He would only slow us down!"
        [/message]
        [message]
            speaker=Arne
            message= _ "I am the one to decide."
            [option]
                message= _ "Oh, all right then. Come along with us."
                [command]
                    [message]
                        speaker=Brena
                        message= _ "Thank you. My comrades and I will help you on your noble quest."
                    [/message]
                    [allow_recruit]
                        type=Heavy Infantryman
                    [/allow_recruit]
                [/command]
            [/option]
            [option]
                message= _ "I am sorry. We have not the time to spare."
                [command]
                    [message]
                        speaker=Brena
                        message= _ "Take this, then, for I see that you are on a quest. My comrades will help you whenever you call for them."
                    [/message]
                    [allow_recruit]
                        type=Heavy Infantryman
                    [/allow_recruit]
                    [kill]
                        id=Brena
                    [/kill]
                    [kill]
                        type=Iron Mauler
                    [/kill]
                    [sound]
                        name=gold.ogg
                    [/sound]
                    [message]
                        speaker=narrator
                        image="wesnoth-icon.png"
                        message= _ "You receive 70 pieces of gold!"
                    [/message]
                    [gold]
                        side=1
                        amount=70
                    [/gold]
                [/command]
            [/option]
        [/message]
#endif
        [endlevel]
            result=victory
            bonus=yes
        [/endlevel]
    [/event]

    [event]
        name=time over
        [message]
            speaker=Muff Toras
            message= _ "My reinforcements are here!"
        [/message]
        [message]
            speaker=Arne
            message= _ "He escaped us..."
        [/message]
    [/event]

    [event]
        name=die
        [filter]
            id=Nil-Galion
        [/filter]
        [message]
            speaker=Nil-Galion
            message= _ "You foolish human, you killed me but you won't be able to reach the undead. I fulfilled the pact and will be reanimated soon to be a Lord of their armies."
        [/message]
        [message]
            speaker=Arne
            message= _ "Hurry, we have to track them down. Maybe we can still get them. They have to be in the north!"
        [/message]
        [objectives]
            side=1
            [objective]
                description= _ "Hurry to the north and stop the kidnappers"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Arne"
                condition=lose
            [/objective]
            [objective]
                description= _ "Turns run out"
                condition=lose
            [/objective]
        [/objectives]
    [/event]

    [event]
        name=die
        [filter]
            id=Arne
        [/filter]
        [message]
            speaker=Arne
            message= _ "All is lost now that I am dead..."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
[/scenario]
