#textdomain wesnoth-utbs
# Scenario 3: A Stirring in the Night (alternate)

#!-- This would be a side branch to try new things while keeping camapign intact and playable
#!-- As trying to rewrite everything from the start would inadvertly screw something big I'll try it this way

#!-- Because of the sheer size of the task ahead I'll take modular approach
#!-- Main scenario file will only call macros and set the enviroment
#!-- Every macro will be defined in it's own file in /utils/scen3_alt
#!-- This should allow minimalise effort needed when tweaking/fixing/removing/replacing events
#!-- I am aware that tasks requiring mechanical alteration of whole scenario file will be made harder in this way
#!-- But I think this can be overcome by proper shell scripting
#!-- If you are a new maintainer and feel this deployment is limiting feel free to abandon it

#!-- Scenario notes
#!-- Scenario should work under following assumptions
#!-- Player finds himself on the battlefield between feuding undead
#!-- Undead deploy champions (one each)
#!-- Number of tents saved from destruction affects unit limit later in campaign
#!-- Character Garak is removed from campaign at this stage
#!-- There is an orc raid in second half
#!-- Thereis no timeflow, scenario takes place at night
#!-- Above gives us

[scenario]
    id="3_Stirring_in_the_Night_alt"
    name= _ "A Stirring in the Night (development branch)"
    label= _ "A Stirring in the Night (development branch)"

    map_data="{campaigns/Under_the_Burning_Suns/maps/03_A_Stirring_in_the_Night.map}"

    #!-- This appends the module files for the scenario
    {campaigns/Under_the_Burning_Suns/scenarios/scen3_alt}

    [music]
        name=frantic.ogg
    [/music]
    {VICTORY_AND_DEFEAT_MUSIC}
    #!-- I shouldn't allow the branches to remerge, to many things would get broken at once, but who cares, it sucks anyway ;)

    next_scenario=4_Descending_into_Darkness
    #don't display snapshot of map in saved games
    snapshot="no"
    #there is no turn limit for this scenario
    turns="-1"
    victory_when_enemies_defeated=no

    {LONGDARK4}

    #! -- Story leading to sceanario
    {STORY_CHAPTER_3} #
    #! -- Setting up sides
    {SIDES_SETUP}#
    #! -- standart macro
    {STARTING_VILLAGES 1 30}#
    #! -- setting up objectives,variables and map objects
    #! -- sets variables : $ambush_turn, $sneak_up, $elven_camps, $killed_by_azkotep, $killed_by_ystara, $grak_challenged, $zur_challenged
    {PRESTART}#
    #! -- initial dialogue, placement of champions ^ probably should be moved to prestart
    {SCENARIO_START}#
    #! -- at the end of the initial dialogue kaleh raises a war cry, some elves will wake up and respond
    {WAR_CRY}#
    #! -- count (or store) dying elves and orcs, they will make a host for possesed Garak
    #! -- sets variables : $azkotep_casaulties, $ystara_casaulties
    #! -- affects variables : $killed_by_ystara, $killed_by_azkotep
    {ELF_CORPSE}#
    #! -- count destroyed tents, each lost makes future scenarios harder
    #! -- includes defeat by loss of tents
    #! -- affects variables : $elven_camps
    {DESTROY_TENT}#
    #! -- instead with providing AI with higher lvl units on medium and hard give it highly experienced lvl1's
#ifdef EASY
#else
    {RECRUIT_TWEAK}#
#endif
    #! -- if opposing champion wasn't attacked by the player yet Garak can issue a challenge
    #! -- affects variables : $grak_challenged, $zur_challenged
    {CHALLENGE}#
    #! -- if challenge didn't happen by turn 12 and bad guy die garak gets possesed
    #! -- sets variable : $ElvishGarak, $defiant_death
    #! -- depends on variables : $grak_challenged, $zur_challenged, $azkotep_casaulties[], $ystara_casaulties[], $killed_by_azkotep, $killed_by_ystara
    #! -- clears variables : $azkotep_casaulties[], $ystara_casaulties[], $killed_by_azkotep, $killed_by_ystara
    {POSSESION}#
    #! -- somewhere around turn 8 an orc raiding party makes an entrance
    #! -- affects variables : $sneak_up
    #! -- depends on variables : $ambush_turn
    #! -- clears variables : $ambush_turn
    {ORC_PARTY}#
    #! -- handles evil guys deaths and victory events, lots of dialogue
    #! -- includes glorious victory
    #! -- includes normal victory
    #! -- sets variables : $scen3 (for compatibility with classic branch)
    #! -- depends on variables : $ElvishGarak, $defiant_death, $elven_camps
    #! -- clears variables : $ElvishGarak, $grak_challenged, $zur_challenged, $defiant_death, $elven_camps
    {CREEP_DEATH}

    #! -- and the good guys die
    {KALEH_DEATH}#

    {FRIEND_DEATH}#

    {ELYSSA_DEATH}#
[/scenario]
