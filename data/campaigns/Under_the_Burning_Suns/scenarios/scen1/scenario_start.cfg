#textdomain wesnoth-utbs

#Internal macros : VILLAGE_EVENT

# macro for setting up the village occupants

#define VILLAGE_EVENT TYPE NAME_STRING GENDER_NAME
    {VARIABLE elf_pool[$elf_pool_counter].type {TYPE}}
    {VARIABLE elf_pool[$elf_pool_counter].name {NAME_STRING}}
    {VARIABLE elf_pool[$elf_pool_counter].gender {GENDER_NAME}}
    {VARIABLE_OP elf_pool_counter add 1}
#enddef

# prestart events:
# set starting scenario objectives
# set starting variables

[event]
    name=prestart
    # set starting scenario objectives
    [objectives]
        summary= _ "Starting Objectives:"
        [objective]
            description= _ "Rescue Surviving Elves"
            condition=win
        [/objective]
        [objective]
            description= _ "Death of Kaleh, Nym, Garak or Zhul"
            condition=lose
        [/objective]
    [/objectives]

    # There are 3 mudcrawler encounter spots, in the NW and SW corner
    # and in the barracks.  Depending on which way you circle around
    # the village, you will encounter the NW or barracks first.

    # At start seen a mudcrawler is false
    {VARIABLE seen_mudcrawler "no"}

    # Can't end scenario until all elves have been rescued (5 events)
    {VARIABLE rescued_elves 0}

    # Elves in outlying villages - set array index and elf pool counter
    {VARIABLE elf_pool_counter 0}

    # Elves in the pool - 2 fighters, 2 archers, 2 hunters, 2 scouts
    {VILLAGE_EVENT "Desert Fighter"	_"Lrea"		female}
    {VILLAGE_EVENT "Desert Fighter"	_"Piyru"	male}
    {VILLAGE_EVENT "Desert Archer"	_"Frea"		female}
    {VILLAGE_EVENT "Desert Archer"	_"Danu"		male}
    {VILLAGE_EVENT "Desert Hunter"	_"Hamuil"	male}
    {VILLAGE_EVENT "Desert Hunter"	_"Anioh"	male}
    {VILLAGE_EVENT "Desert Scout"	_"Vemuil"	male}
    {VILLAGE_EVENT "Desert Scout"	_"Taliu"	male}
[/event]

#undef VILLAGE_EVENT

# Dialogue at start of scenario
[event]
    name=start
    [message]
        speaker=Nym
        message= _ "Hey Kaleh, are you in there?"
    [/message]
    [message]
        speaker=Kaleh
        message= _ "Nym, is that you?"
    [/message]
    [message]
        speaker=Nym
        message= _ "Yes, come on out already. The storm has passed. With the morning light Naia has ended the terrible night."
    [/message]
    [message]
        speaker=Kaleh
        message= _ "Has the sky really stopped falling?"
    [/message]
    [message]
        speaker=Nym
        message= _ "I already told you, the sky is clear and empty. Now come quickly, silly, others may need our help."
    [/message]
    [message]
        speaker=Kaleh
        message= _ "What's happened? Oh Eloh, the craters are everywhere, everything is gone, ruined. I can hardly recognize our village. I didn't think it could be this bad."
    [/message]
    [message]
        speaker=Nym
        # wmllint: local spelling C'mon
        message= _ "C'mon Kaleh, we have to go see if anyone is hurt or needs help. I think I hear people calling from the south. Now is not a time for fear, we must be strong. After all you are the nephew of Tanuil, our leader, and you must answer to the call of duty. Perhaps in the light of day things won't be as bad as you think. Let's explore the village and see who else has survived the night."
    [/message]
    [message]
        speaker=Kaleh
        message= _ "Wait, our keep is just to the east. Our leader Tanuil must surely be recruiting others to help deal with the devastation. Perhaps we should go to the keep, before we explore the rest of the village."
    [/message]
[/event]

# Dialogue when Nym and Kaleh see the ruined keep
[event]
    name=moveto
    [filter]
        x=33-40
        y=19-26
        side=1
    [/filter]
    [allow_undo]
    [/allow_undo]
    [message]
        speaker=Kaleh
        message= _ "Tanuil's keep, our beautiful fortress, it is destroyed. How will we summon our people to battle?"
    [/message]
    [message]
        speaker=Nym
        message= _ "We must rally those survivors we can find amidst the rubble. It doesn't look like anyone survived, but at least we can thank Eloh it was a quick death. But come on, we can't dwell on the dead, we must help the living."
    [/message]
    [message]
        speaker=Kaleh
        message= _ "But if Tanuil is dead, who will lead us?"
    [/message]
    [message]
        speaker=Nym
        message= _ "That's a question for another time. Let's keep exploring the wreckage."
    [/message]
[/event]
