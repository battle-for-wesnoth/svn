#textdomain wesnoth

# These are all direct clones of the mainline healing abilities, except that
# they are set to exclude units suffering from dehydration. Dehydration is only
# delayed by healers, so they must not actually heal a dehydrated unit any
# hitpoints.
#
# The ability macros go into wesnoth textdomain since the strings are identical
# to their core counterparts, but the special notes belong to wesnoth-utbs.

#define SPECIAL_NOTES_NIGHT_REGENERATION
#enddef
#define SPECIAL_NOTES_DAY_REGENERATION
#enddef

#define WEAPON_SPECIAL_TWINSTRIKE
#enddef


#define ABILITY_NIGHT_REGENERATION
	[regenerate]
		value=8
		id=night_regeneration
		name= _ "nightly regeneration"
		female_name= _ "female^nightly regeneration"
		description= _ "Nightly Regeneration"
		affect_self=yes
		poison=cured
		[filter_self]
			[filter_location]
				time_of_day=chaotic
			[/filter_location]
		[/filter_self]
	[/regenerate]
#enddef

#define ABILITY_DAY_REGENERATION
	[regenerate]
		value=4
		id=day_regeneration
		name= _ "dayly regeneration"
		female_name= _ "female^daily regeneration"
		description= _ "Daily Regeneration"
		affect_self=yes
		poison=slowed
		[filter_self]
			[filter_location]
				time_of_day=lawful
			[/filter_location]
		[/filter_self]
	[/regenerate]
#enddef

#define UTBS_ABILITY_HEALS
    [heals]
        value=4
        id=healing
        affect_allies=yes
        name= _ "heals +4"
        female_name= _ "female^heals +4"
        description=  _ "Heals +4:
Allows the unit to heal adjacent allied units at the beginning of our turn.

A unit cared for by this healer may heal up to 4 HP per turn, or stop poison from taking effect for that turn.
A poisoned unit cannot be cured of its poison by a healer, and must seek the care of a village or a unit that can cure."
        affect_self=no
        poison=slowed
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
            [filter]
                [not]
                    [filter_wml]
                        [status]
                            dehydration_slowed_by_healer=yes
                        [/status]
                    [/filter_wml]
                [/not]
            [/filter]
        [/affect_adjacent]
    [/heals]
#enddef

#define UTBS_ABILITY_EXTRA_HEAL
    [heals]
        value=8
        id=healing
        affect_allies=yes
        name= _ "heals +8"
        female_name= _ "female^heals +8"
        description= _ "Heals +8:
This unit combines herbal remedies with magic to heal units more quickly than is normally possible on the battlefield.

A unit cared for by this healer may heal up to 8 HP per turn, or stop poison from taking effect for that turn.
A poisoned unit cannot be cured of its poison by a healer, and must seek the care of a village or a unit that can cure."
        affect_self=no
        poison=slowed
        [affect_adjacent]
            adjacent=n,ne,se,s,sw,nw
            [filter]
                [not]
                    [filter_wml]
                        [status]
                            dehydration_slowed_by_healer=yes
                        [/status]
                    [/filter_wml]
                [/not]
            [/filter]
        [/affect_adjacent]
    [/heals]
#enddef

#define ABILITY_TWILIGHT_SKIRMISHER
    # Canned definition of the twilight Skirmisher ability to be included in an [abilities]
    # clause.
    [skirmisher]
        id=skirmisher
        name= _ "twilight skirmisher"
        female_name= _ "female^twilight skirmisher"
        description= _ "Twilight skirmisher:
This unit is skilled in moving past enemies quickly during the twilight times of day, and ignores all enemy Zones of Control."
        affect_self=yes
	[filter_self]
		[filter_location]
			time_of_day=liminal
		[/filter_location]
	[/filter_self]
    [/skirmisher]
#enddef

#define ABILITY_TWILIGHT_AMBUSH
    # Canned definition of the Ambush ability to be included in an
    # [abilities] clause.
    [hides]
        id=twilight ambush
        name= _ "twilight ambush"
        female_name= _ "female^twilight ambush"
        name_inactive= _ "twilight ambush"
        female_name_inactive= _ "female^twilight ambush"
        description= _ "Twilight ambush:
This unit can hide during twilight times of day, and remain undetected by its enemies.

Enemy units cannot see this unit while it is a twilight time of day, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        description_inactive= _ "Ambush:
This unit can hide during twilight times of day, and remain undetected by its enemies.

Enemy units cannot see this unit while it is a twilight time of day, except if they have units next to it. Any enemy unit that first discovers this unit immediately loses all its remaining movement."
        affect_self=yes
        [filter_self]
            [filter_location]
                #terrain=*^Fp,*^Fet,*^Ft,*^Fpa,*^Fd*,*^Fm*
		time_of_day=liminal
            [/filter_location]
        [/filter_self]
    [/hides]
#enddef

#define UTBS_ABILITY_CURES
    {ABILITY_UNPOISON}
    {UTBS_ABILITY_EXTRA_HEAL}
#enddef

#textdomain wesnoth-utbs

#define SPECIAL_NOTES_UTBS_HEALS
_" This unit is capable of basic healing and slowing dehydration."#enddef

#define SPECIAL_NOTES_UTBS_CURES
_" This unit is capable of healing those around it, slowing dehydration, and curing them of poison."#enddef

