#textdomain wesnoth-sotbe

#define ELVISH_FIGHTER X Y
    [unit]
        type=Elvish Fighter
        side=2
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define ELVISH_FIGHTER_G X Y
    [unit]
        type=Elvish Fighter
        ai_special=guardian
        side=2
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define ELVISH_ARCHER_G X Y
    [unit]
        type=Elvish Archer
        ai_special=guardian
        side=2
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define ELVISH_CAPTAIN_G X Y
    [unit]
        type=Elvish Captain
        ai_special=guardian
        side=2
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define ELVISH_ARCHER X Y
    [unit]
        type=Elvish Archer
        side=2
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define ORCISH_GRUNT_G X Y
    [unit]
        type=Orcish Grunt
        side=3
        generate_name=yes
        random_traits=yes
        ai_special=guardian
        x={X}
        y={Y}
    [/unit]
#enddef

#define ORCISH_ARCHER_G X Y
    [unit]
        type=Orcish Archer
        side=3
        generate_name=yes
        random_traits=yes
        ai_special=guardian
        x={X}
        y={Y}
    [/unit]
#enddef

#define ORCISH_GRUNT X Y
    [unit]
        type=Orcish Grunt
        side=1
        generate_name=yes
        random_traits=yes
        ai_special=guardian
        x={X}
        y={Y}
    [/unit]
#enddef

#define ORCISH_ARCHER X Y
    [unit]
        type=Orcish Archer
        side=1
        generate_name=yes
        random_traits=yes
        ai_special=guardian
        x={X}
        y={Y}
    [/unit]
#enddef

#define WOLF_RIDER X Y
    [unit]
        type=Wolf Rider
        side=1
        generate_name=yes
        random_traits=yes
        ai_special=guardian
        x={X}
        y={Y}
    [/unit]
#enddef

#define OLD_ORCISH_SHAMAN X Y ID_STRING NAME_STRING
    [unit]
        id={ID_STRING}
        name={NAME_STRING}
        type=Old Orcish Shaman
        profile=portraits/orcish_shaman.png
        side=1
        x={X}
        y={Y}
        random_traits=no
        [modifications]
            {TRAIT_LOYAL}
        [/modifications]
    [/unit]
#enddef

#define NOVICE_ORCISH_SHAMAN X Y ID_STRING NAME_STRING
    [unit]
        id={ID_STRING}
        name={NAME_STRING}
        type=Novice Orcish Shaman
        profile=portraits/young_orcish_shaman.png
        side=1
        x={X}
        y={Y}
        random_traits=no
        [modifications]
            {TRAIT_LOYAL}
        [/modifications]
    [/unit]
#enddef

#define ORCISH_SHAMAN X Y ID_STRING NAME_STRING
    [unit]
        id={ID_STRING}
        name={NAME_STRING}
        type=Orcish Shaman
        profile=portraits/young_orcish_shaman.png
        side=1
        x={X}
        y={Y}
        random_traits=no
        [modifications]
            {TRAIT_LOYAL}
        [/modifications]
    [/unit]
#enddef

#define WATCH_TOWER X Y ID_STRING
    [unit]
        id={ID_STRING}
        type=Watch Tower
        side=1
        x={X}
        y={Y}
        upkeep=free
    [/unit]
#enddef

#define TRANSPORT_GALLEON X Y
    [unit]
        side=3
        type=Transport Galleon
        x={X}
        y={Y}
    [/unit]
#enddef

#define SCORPION X Y
    [unit]
        type=Giant Scorpion
        side=3
        x={X}
        y={Y}
    [/unit]
#enddef

#define SAURIAN X Y
    [unit]
        type=Saurian Skirmisher
        side=1
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define SAURIAN_HEALER X Y
    [unit]
        type=Saurian Augur
        side=1
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define MERMAN X Y ID_STRING
    [unit]
        side=5
        type=Merman Fighter
        id={ID_STRING}
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define HEAVY_INFANTRYMAN X Y
    [unit]
        type=Heavy Infantryman
        side=2
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define BLACK_FLAG
    flag=flags/black-flag-1.png:100,flags/black-flag-2.png:300,flags/black-flag-1.png:100,flags/black-flag-3.png:300
    flag_icon=flags/black-flag-icon.png
#enddef

#define HUMAN_GUARD X Y
    [unit]
        type=Pikeman
        ai_special=guardian
        side=4
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define ORC_GUARD X Y
    [unit]
        type=Orcish Warrior
        ai_special=guardian
        side=2
        generate_name=yes
        random_traits=yes
        x={X}
        y={Y}
    [/unit]
#enddef

#define RENAME_IF_DEAD VAR NAME STRING
    [if]
        [variable]
            name={VAR}
            equals=yes
        [/variable]
        [then]
            {MODIFY_UNIT id={NAME} name {STRING}}
        [/then]
    [/if]
#enddef

#define GOT_THE_GREAT_HORDE SIDES
    [event]
        name=side turn
        first_time_only=no

        {VARIABLE great_horde_sides {SIDES}}

        [if]
            [variable]
                name=great_horde_sides
                contains=$side_number
            [/variable]

            [then]
                [store_unit]
                    [filter]
                        side={SIDES}

                        [not]
                            canrecruit=yes
                        [/not]

                        [not]
                            [filter_wml]
                                [modifications]
                                    [trait]
                                        id=loyal
                                    [/trait]
                                [/modifications]
                            [/filter_wml]

                            [filter_wml]
                                [variables]
                                    great_horde_upkeep_mod_applied=yes
                                [/variables]
                            [/filter_wml]
                        [/not]
                    [/filter]

                    kill=yes
                    variable=great_horde_units
                [/store_unit]

                {FOREACH great_horde_units i}
                    {VARIABLE great_horde_units[$i].upkeep $great_horde_units[$i].level}
                    {VARIABLE_OP great_horde_units[$i].upkeep add -1}
                    {VARIABLE great_horde_units[$i].variables.great_horde_upkeep_mod_applied yes}

                    [unstore_unit]
                        variable=great_horde_units[$i]
                    [/unstore_unit]
                {NEXT i}

                {CLEAR_VARIABLE great_horde_units}
            [/then]
        [/if]
    [/event]

    [event]
        name=prerecruit
        first_time_only=no

        [filter]
            side={SIDES}
        [/filter]

        {VARIABLE unit.upkeep $unit.level}
        {VARIABLE_OP unit.upkeep add -1}
        {VARIABLE unit.variables.great_horde_upkeep_mod_applied yes}

        [unstore_unit]
            variable=unit
            find_vacant=no
        [/unstore_unit]
    [/event]

    [event]
        name=prerecall
        first_time_only=no

        [filter]
            side={SIDES}

            [not]
                [filter_wml]
                    [variables]
                        great_horde_upkeep_mod_applied=yes
                    [/variables]
                [/filter_wml]
            [/not]
        [/filter]

        {VARIABLE unit.upkeep $unit.level}
        {VARIABLE_OP unit.upkeep add -1}
        {VARIABLE unit.variables.great_horde_upkeep_mod_applied yes}

        [unstore_unit]
            variable=unit
            find_vacant=no
        [/unstore_unit]
    [/event]
#enddef
